<!DOCTYPE html>
<html>
<head>
	<title>Share</title>
	
	<!-- CSS -->
<link  href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

<!-- jQuery and JS bundle w/ Popper.js -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
	<script type="text/javascript">
	function validate()
	{
		
	}
	</script>
	<link   type="text/css" href="css/style.css">
</head>
<body>
	


	<section id="showcase">
		
		<header id="main-header">
			<div class="container">
				<h1>My Website</h1>
			</div>
		</header>
		<nav id="navbar">
			<div class="container">
				<ul>
					<li><a href="#"></a></li>
					
				</ul>
			</div>
		</nav>
		<div class="container">
			<h1>Enter Your Message Here</h1>
			
			<div class="dropdown show">
				<div class="main-form-row">
					<div class="r1-container">
		<br><br><br><br>
						
						<div id="id01" class="r1-modal">
						  <div class="r1-modal-content">
							<header class="r1-container r1-teal"> 
							  <span onclick="document.getElementById('id01').style.display='none'" 
							  class="r1-button r1-display-topright">&times;</span>
							  <h2>Here is your Message</h2>
							</header>
							<div class="r1-container textdiv">
								
							  <p>Some text..</p>
							  <p>Some text..</p>
							</div>
							<footer class="r1-container r1-teal">
								<p>Copyright &copy; 2020 My Website</p>
							</footer>
						  </div>
						</div>
					</div>
				
				  </div>	
				
			  
				<div class="primary-form">
					<form data-form >
					  <h1>
						Create a disappearing&nbsp;
						<div class="select">
						  <select name="type">
							<option value="message" selected>message</option>
							<option value="link">link</option>
						  </select>
						  						</div>
					  </h1>
					 
					  <div class="errors">
						<h2>ðŸ˜“ Oops!</h2>
						<p data-error-message></p>
					  </div>
					  <h1><textarea name="message"input type="text" name="message" value="" placeholder="What do you want to say?"></textarea></h1>
				
					  <div class="more-options-toggle" style="display: none;">
						more options
						<i class="icon">
						  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
							fill="none"
							stroke="currentColor"
							stroke-width="2"
							stroke-linecap="round"
							stroke-linejoin="round"
							class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline>
						  </svg>
						</i>
					  </div>
					 <div class="more-options-panel open">
						<h3>Self-destruct Timer</h3>
						<div class="select">
						  <select class="" name="ttl">
							<option value="60">1 minute</option>
							<option value="600">10 minutes</option>
							<option value="3600" selected>1 hour</option>
							<option value="86400">1 day</option>
							<option value="604800">1 week</option>
						  </select>
					
						</div>
						
					 </div>
				
				
					</form>
					<button onclick="submitForm()"
					class="r1-button r1-black btn btn-outline-primary">Submit</button>
			  </div>
			

			
			
			
		</div>
	</section>

	<div class="container">
		<section id="main">
			<h1>About</h1>
			<p>Disappearing URLs and messages!<br>
			Create short,temporary,self-destructing messages and links that automatically expire!</p>
		</section>
		
	</div>

	<footer id="main-footer">
		<p>Copyright &copy; 2020 My Website</p>
	</footer>

	<script>


function showModal(link){

	document.getElementById('id01').style.display='Block';

	var parent_div = document.getElementsByClassName("textdiv"); 

	make_link = "http://localhost:3000/"+link;
	var aTag = document.createElement("a");
	aTag.href = make_link;
	aTag.innerText=make_link;
	parent_div[0].appendChild(aTag);

}

function submitForm() {
        var form = document.querySelector('[data-form]');
       
        var formData = new FormData(form);
        var data = {
          msg: formData.get('message'),
          ttl: formData.get('ttl'),
          type: formData.get('type'),
        }

        if (!data.msg) {
          console.log('No ' + data.type + ' provided.');
          return;
        }

        fetch('http://localhost:3000/postData', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(data),
        })
          .then(res=>res.json())
          .then(q=>		{	showModal(q.link)
		  }
          );
      }


	</script>
</body>
</html>